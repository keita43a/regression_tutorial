# パネルデータ分析 {#paneldata}


## パネルデータ

重回帰分析のセクションで扱ったデータは基本的にはクロスセクションデータであった。
これは、データの変動が人であったり、県であったり、グループであったりするものであり、データでは添字$i$で表現していた。

これに加えて、時間の変動藻ある場合には、クロスセクションデータで分析するよりアドバンテージがある。時間変動がある場合にどのような形になるか見てみよう。

### スクリプトの準備

新しいスクリプトにコードを書いていく。
新しくスクリプトを作成し、`panel_data.R`という名前をつけて保存する。


### データの準備

Rパッケージに付属しているデータを使う。
`AER`パッケージをインストールして読み込もう。

```{r}
install.packages("AER")

library(AER)
```

データを読み込む。データ名がながいので、 `data_f`に入れ替えよう。

```{r}
data(Fatalities)

data_f <- Fatalities
```


データの中身を見てみる。
まずは、どんなデータなのか`head()`で確認する。

```{r}
head(data_f)
```

このデータはアメリカの州×年ごとに、様々な変数が記録されているデータである。
どんな変数が記録されているかは、helpファイルを見るとわかる。

```{r}
help(Fatalities)
```


### データの記述統計

データの記述統計を確認しよう。一番基本的なものはsummary()関数を使う方法である。

```{r}
summary(data_f)
```

Chapter \@ref(#rstats)　で説明したように、他のパッケージを使う方法もある。

```{r}
library(psych)

describe(data_f, skew = FALSE)
```

describeでは、カテゴリー変数も無理やり数値化して計算するのでおかしなことになっているものがあることである。例えば、stateは州なので、平均や標準偏差が計算されているのはおかしい。
しかし、数値の変数を見るときには有用である。


skimrパッケージの`skim()`関数は、カテゴリ変数と連続変数を区別して記述統計を示してくれる。

```{r}
library(skimr)

skim(data_f)
```


```{r}
# https://www.econometrics-with-r.org/10.1-panel-data.html
```

