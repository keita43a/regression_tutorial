# パッケージとは {#packages}

## パッケージについて

Rはデフォルト(初期状態)でインストールされている関数がたくさんある。

ベクトルの長さを測る`length()`や、散布図を描く`plot()`などは**関数**であり、もともとRをインストールした時点で入っている。

しかし、さらにRを拡張して機能を強化することができる。  
それが**パッケージ**のインストールである。

たとえばスマホにはもともと基本アプリが入っているが、さらにいろんなアプリをダウンロードしてインストールできることに似ている。
しかしパッケージは無料である。



## パッケージのインストール

パッケージのインストールをする方法は二つある。

1. `install.packages()`関数を使う方法

```{r, eval=FALSE}
install.packages("ggplot2")
```

2. Rstudioの右下の区画の[Packages]タブから、[Install]ボタンを押して、ダイアログに従ってインストール



## よく使うパッケージのインストール

`tidyverse`と呼ばれるパッケージをインストールしてみよう。
```{r, eval=FALSE}
install.packages("tidyverse")
```

実はこの`tidyverse`はパッケージ**群**であり、複数のパッケージがインストールされる。



### Tidyverseについて

Tidyverseというパッケージ群は`ggplot2`, `dplyr`, `tidyr`, `readr`, `purrr`, `tibble`, `stringr`, `forcats`, `lubridate`という複数のパッケージを含む

たとえば`ggplot2`は図を描くためのパッケージであり、`plot()`関数などとかぶる。実際に、`ggplot2`では`plot()`と同じような図を出力することができる。Tidyverseシリーズは、データをより直感的に扱うための哲学に基づいて開発されており、Rオリジナルの関数ではないが、多くの人が使うパッケージ群となっておりRを学ぶならばほぼ必須といえる状態になりつつある。



## パッケージの使い方1

パッケージの使い方は２通りある。
パッケージに入っている関数を使うためには、パッケージを読み込む

```{r}
## library()でパッケージの読み込み
library(tidyverse)
```

読み込んだ後は、パッケージに含まれている関数が普通に使える。

```{r, eval=FALSE}
## read_csvはtidyverseに入っているreadrというパッケージに含まれる
data1 <- read_csv("data/data1.csv")
```


## パッケージの使い方2

```{r, echo=FALSE}
## パッケージを一時的にunload
detach(package:readr, unload=TRUE)
```

読み込んでいないパッケージの関数を使おうとするとエラーが出る。

```{r, error=TRUE}
## read_csvはtidyverseに入っているreadrというパッケージに含まれる
data1 <- read_csv("data/data1.csv")
```

パッケージ名と関数名を`::`で繋ぐと、読み込んでいなくても使える。

```{r, eval=FALSE}
data1 <- readr::read_csv("data/data1.csv")
```

これが２つ目のパッケージの使い方である。そのスクリプトであまり使わないが一回だけ使いたいケースや、一般的でないパッケージや関数なので何のパッケージに入っている関数なのかを明示したい際に使う。

```{r, echo=FALSE, message=FALSE}
## 再度readrをloadする。
library(readr)
```

